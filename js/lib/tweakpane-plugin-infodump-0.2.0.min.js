!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).TweakpaneInfodumpPlugin={})}(this,(function(t){"use strict";class e{constructor(t){this.controller_=t}get element(){return this.controller_.view.element}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(t){this.controller_.viewProps.set("disabled",t)}get hidden(){return this.controller_.viewProps.get("hidden")}set hidden(t){this.controller_.viewProps.set("hidden",t)}dispose(){this.controller_.viewProps.set("disposed",!0)}}function n(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}class r{constructor(){this.observers_={}}on(t,e){let n=this.observers_[t];return n||(n=this.observers_[t]=[]),n.push({handler:e}),this}off(t,e){const n=this.observers_[t];return n&&(this.observers_[t]=n.filter((t=>t.handler!==e))),this}emit(t,e){const n=this.observers_[t];n&&n.forEach((t=>{t.handler(e)}))}}const i="tp";function o(t){return(e,n)=>[i,"-",t,"v",e?`_${e}`:"",n?`-${n}`:""].join("")}class s{constructor(t,e){var n;this.constraint_=null==e?void 0:e.constraint,this.equals_=null!==(n=null==e?void 0:e.equals)&&void 0!==n?n:(t,e)=>t===e,this.emitter=new r,this.rawValue_=t}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,e){const n=null!=e?e:{forceEmit:!1,last:!0},r=this.constraint_?this.constraint_.constrain(t):t;(!this.equals_(this.rawValue_,r)||n.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=r,this.emitter.emit("change",{options:n,rawValue:r,sender:this}))}}class a{constructor(t){this.emitter=new r,this.value_=t}get rawValue(){return this.value_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,e){const n=null!=e?e:{forceEmit:!1,last:!0};(this.value_!==t||n.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.value_=t,this.emitter.emit("change",{options:n,rawValue:this.value_,sender:this}))}}function u(t,e){const n=null==e?void 0:e.constraint,r=null==e?void 0:e.equals;return n||r?new s(t,e):new a(t)}class l{constructor(t){this.emitter=new r,this.valMap_=t;for(const t in this.valMap_){this.valMap_[t].emitter.on("change",(()=>{this.emitter.emit("change",{key:t,sender:this})}))}}static createCore(t){return Object.keys(t).reduce(((e,n)=>Object.assign(e,{[n]:u(t[n])})),{})}static fromObject(t){const e=this.createCore(t);return new l(e)}get(t){return this.valMap_[t].rawValue}set(t,e){this.valMap_[t].rawValue=e}value(t){return this.valMap_[t]}}function c(t){return e=>n=>{if(!e&&void 0===n)return{succeeded:!1,value:void 0};if(e&&void 0===n)return{succeeded:!0,value:void 0};const r=t(n);return void 0!==r?{succeeded:!0,value:r}:{succeeded:!1,value:void 0}}}function d(t){return{custom:e=>c(e)(t),boolean:c((t=>"boolean"==typeof t?t:void 0))(t),number:c((t=>"number"==typeof t?t:void 0))(t),string:c((t=>"string"==typeof t?t:void 0))(t),function:c((t=>"function"==typeof t?t:void 0))(t),constant:e=>c((t=>t===e?e:void 0))(t),raw:c((t=>t))(t),object:e=>c((t=>{var n;if(null!==(n=t)&&"object"==typeof n)return function(t,e){return Object.keys(e).reduce(((n,r)=>{if(void 0===n)return;const i=(0,e[r])(t[r]);return i.succeeded?Object.assign(Object.assign({},n),{[r]:i.value}):void 0}),{})}(t,e)}))(t),array:e=>c((t=>{var n;if(Array.isArray(t))return n=e,t.reduce(((t,e)=>{if(void 0===t)return;const r=n(e);return r.succeeded&&void 0!==r.value?[...t,r.value]:void 0}),[])}))(t)}}const p={optional:d(!0),required:d(!1)};const v=o(""),h={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};function f(t){return e=>e.toFixed(Math.max(Math.min(t,20),0))}f(0);function g(t){return[t[0],t[1],t[2]]}function m(t){return e=>function(t,e){const n=f("float"===e?2:0);return`rgb(${g(t.getComponents("rgb",e)).map((t=>n(t))).join(", ")})`}(e,t)}function b(t){return e=>function(t,e){const n=f(2),r=f("float"===e?2:0);return`rgba(${t.getComponents("rgb",e).map(((t,e)=>(3===e?n:r)(t))).join(", ")})`}(e,t)}function _(t){return e=>function(t,e){const n=f("float"===e?2:0),r=["r","g","b"];return`{${g(t.getComponents("rgb",e)).map(((t,e)=>`${r[e]}: ${n(t)}`)).join(", ")}}`}(e,t)}function w(t){return e=>function(t,e){const n=f(2),r=f("float"===e?2:0),i=["r","g","b","a"];return`{${t.getComponents("rgb",e).map(((t,e)=>`${i[e]}: ${(3===e?n:r)(t)}`)).join(", ")}}`}(e,t)}["int","float"].reduce(((t,e)=>[...t,{format:{alpha:!1,mode:"rgb",notation:"func",type:e},stringifier:m(e)},{format:{alpha:!0,mode:"rgb",notation:"func",type:e},stringifier:b(e)},{format:{alpha:!1,mode:"rgb",notation:"object",type:e},stringifier:_(e)},{format:{alpha:!0,mode:"rgb",notation:"object",type:e},stringifier:w(e)}]),[]);var y=[[/\r\n/g,"\n"],[/\n(#+)(.*)/g,function(t,e,n){void 0===n&&(n="");var r=e.length;return"<h"+r+">"+n.trim()+"</h"+r+">"}],[/!\[([^\[]+)\]\((?:javascript:)?([^\)]+)\)/g,'<img src="$2" alt="$1">'],[/\[([^\[]+)\]\((?:javascript:)?([^\)]+)\)/g,'<a href="$2">$1</a>'],[/(\*\*|__)(.*?)\1/g,"<strong>$2</strong>"],[/\\_/g,"&#95;"],[/(\*|_)(.*?)\1/g,"<em>$2</em>"],[/\~\~(.*?)\~\~/g,"<del>$1</del>"],[/\:\"(.*?)\"\:/g,"<q>$1</q>"],[/\n\s*```\n([^]*?)\n\s*```\s*\n/g,"\n<pre>$1</pre>"],[/`(.*?)`/g,function(t,e){return"<code>"+function(t){t=t.replace(/\&/g,"&amp;");for(var e="'#<>`*-~_=:\"![]()nt",n=e.length,r=0;r<n;r++)t=t.replace(RegExp("\\"+e[r],"g"),(function(t){return"&#"+t.charCodeAt(0)+";"}));return t}(e)+"</code>"}],[/\n(\*|\-|\+)(.*)/g,function(t,e,n){return void 0===n&&(n=""),"<ul>\n\t<li>"+n.trim()+"</li>\n</ul>"}],[/\n[0-9]+\.(.*)/g,function(t,e){return void 0===e&&(e=""),"<ol>\n\t<li>"+e.trim()+"</li>\n</ol>"}],[/\n(&gt;|\>)(.*)/g,function(t,e,n){return void 0===n&&(n=""),"\n<blockquote>"+n.trim()+"</blockquote>"}],[/\n-{5,}/g,"\n<hr />"],[/( *\|[^\n]+\|\r?\n)((?: *\|:?[ -]+:?)+ *\|)(\n(?: *\|[^\n]+\|\r?\n?)*)?/g,function(t,e,n,r){var i=n.split("|").filter((function(t,e,n){return e>0&&e<n.length-1})).map((function(t){return/:-+:/g.test(t)?"center":/-+:/g.test(t)?"right":/:-+/.test(t)?"left":""})),o=function(t){var e=i[t];return e?' align="'+e+'"':""};return"\n<table><tbody><tr>"+e.split("|").map((function(t){return t.trim()})).filter((function(t){return t&&t.length})).map((function(t,e){return"<th"+o(e)+">"+t+"</th>"})).join("")+"</tr>"+r.split("\n").map((function(t){return t.trim()})).filter((function(t){return t&&t.length})).map((function(t){return"<tr>"+t.split("|").filter((function(t,e,n){return e>0&&e<n.length-1})).map((function(t,e){return"<td"+o(e)+">"+t.trim()+"</td>"})).join("")+"</tr>"})).join("")+"</tbody></table>\n"}],[/\n([^\n]+)\n/g,function(t,e){var n=e.trim();return/^<\/?(ul|ol|li|h|p|bl|table|tr|td)/i.test(n)?"\n"+e+"\n":"\n<p>\n"+n+"\n</p>\n"}],[/\s?<\/ul>\s?<ul>/g,""],[/\s?<\/ol>\s?<ol>/g,""],[/<\/blockquote>\n<blockquote>/g,"<br>\n"],[/https?:\/\/[^"']*/g,function(t){return t.replace(/<\/?em>/g,"_")}],[/&#95;/g,"_"]];const j=o("indu"),$=o("indub");class k{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(j()),e.border&&this.element.classList.add($()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(j("t")),e.markdown?n.innerHTML=function(t,e,n){return void 0===e&&(e=!1),void 0===n&&(n=!1),t="\n"+t+"\n",y.forEach((function(e){t=t.replace(e[0],e[1])})),e?n?t.trim().replace(/^<p>([\s\S]*)<\/p>$/,"$1").replace(/<a href="/,'<a target="_blank" href="'):t.trim().replace(/^<p>([\s\S]*)<\/p>$/,"$1"):n?t.trim().replace(/<a href="/,'<a target="_blank" href="'):t.trim()}(e.content):n.textContent=e.content,this.element.appendChild(n)}}class q extends class{constructor(t){this.parent_=null,this.blade=t.blade,this.view=t.view,this.viewProps=t.viewProps;const e=this.view.element;this.blade.value("positions").emitter.on("change",(()=>{["veryfirst","first","last","verylast"].forEach((t=>{e.classList.remove(v(void 0,h[t]))})),this.blade.get("positions").forEach((t=>{e.classList.add(v(void 0,h[t]))}))})),this.viewProps.handleDispose((()=>{!function(t){t&&t.parentElement&&t.parentElement.removeChild(t)}(e)}))}get parent(){return this.parent_}}{constructor(t,e){super({blade:new l({positions:u([],{equals:n})}),view:new k(t,e),viewProps:e.viewProps})}}const x=[{id:"infodump",type:"blade",css:'.tp-induv{position:relative;align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-h-p);padding-right:var(--cnt-h-p)}.tp-induv.tp-v-disabled{opacity:.5}.tp-induv .tp-induv_t{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;padding:2px 4px 2px;width:1px}.tp-induv .tp-induv_t>*:first-child{margin-top:0}.tp-induv .tp-induv_t>*:last-child{margin-bottom:0}.tp-induv .tp-induv_t p,.tp-induv .tp-induv_t h1,.tp-induv .tp-induv_t h2,.tp-induv .tp-induv_t h3,.tp-induv .tp-induv_t ol,.tp-induv .tp-induv_t ul,.tp-induv .tp-induv_t blockquote,.tp-induv .tp-induv_t pre{margin:.5em 0}.tp-induv .tp-induv_t a{color:var(--btn-bg)}.tp-induv .tp-induv_t a:active{color:var(--btn-bg-a)}.tp-induv .tp-induv_t a:hover{color:var(--btn-bg-h)}.tp-induv .tp-induv_t h1{font-size:1.3em;font-weight:bold}.tp-induv .tp-induv_t h2{font-size:1em;font-weight:bold}.tp-induv .tp-induv_t h3{font-size:1em;font-weight:normal}.tp-induv .tp-induv_t ol,.tp-induv .tp-induv_t ul,.tp-induv .tp-induv_t blockquote{padding-left:28px}.tp-indubv::before{border:var(--mo-fg) dashed 1px;border-radius:var(--elm-br);bottom:0;content:"";left:var(--cnt-v-p);opacity:.3;position:absolute;right:var(--cnt-v-p);top:0}',accept(t){const e=p,n=function(t,e){const n=p.required.object(e)(t);return n.succeeded?n.value:void 0}(t,{border:e.optional.boolean,content:e.required.string,markdown:e.optional.boolean,view:e.required.constant("infodump")});return n?{params:n}:null},controller(t){var e,n;return new q(t.document,{border:null!==(e=t.params.border)&&void 0!==e&&e,content:t.params.content,markdown:null!==(n=t.params.markdown)&&void 0!==n&&n,viewProps:t.viewProps})},api:t=>t.controller instanceof q?new e(t.controller):null}];t.plugins=x,Object.defineProperty(t,"__esModule",{value:!0})}));
